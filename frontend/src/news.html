<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berita & Kegiatan | Partai Ibu - Saluran Informasi Resmi</title>

    <!-- SEO PRIMARY -->
    <meta name="title" content="Berita & Kegiatan | Partai Ibu" />
    <meta name="description"
        content="Kumpulan berita, rilis media, dan laporan kegiatan terbaru dari Partai Ibu di seluruh Indonesia." />

    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../dist/css/main.css" />

    <style>
        .news-hero {
            background: linear-gradient(135deg, #E60012 0%, #a5000d 100%);
            padding: 120px 0 80px;
            color: white;
            position: relative;
            overflow: hidden;
            border-radius: 0 0 50px 50px;
        }

        .news-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://www.transparenttextures.com/patterns/cubes.png');
            opacity: 0.1;
        }

        .search-container {
            margin-top: -35px;
            z-index: 10;
            position: relative;
        }

        .search-box {
            background: white;
            border-radius: 100px;
            padding: 10px 10px 10px 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
        }

        .search-box input {
            border: none;
            flex: 1;
            outline: none;
            font-size: 1rem;
        }
    </style>
</head>

<body class="bg-light">

    <!-- ================= NAVBAR ================= -->
    <div id="navbar"></div>

    <!-- ================= HERO ================= -->
    <header class="news-hero">
        <div class="container text-center position-relative">
            <nav aria-label="breadcrumb" class="d-flex justify-content-center mb-4">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="index.html"
                            class="text-white opacity-75 text-decoration-none">Beranda</a></li>
                    <li class="breadcrumb-item active text-white fw-bold" aria-current="page">Berita & Kegiatan</li>
                </ol>
            </nav>
            <h1 class="display-3 fw-bold mb-3">Pusat <span class="text-warning">Informasi</span></h1>
            <p class="lead opacity-90 mx-auto" style="max-width: 650px;">
                Tetap terhubung dengan perkembangan terbaru, rilis resmi, dan gerakan aspirasi Partai Ibu di seluruh
                penjuru negeri.
            </p>
        </div>
    </header>

    <!-- ================= SEARCH & FILTER ================= -->
    <div class="container search-container">
        <div class="row justify-content-center">
            <div class="col-lg-7">
                <div class="search-box">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                        class="bi bi-search text-secondary me-3" viewBox="0 0 16 16">
                        <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg>
                    <input type="text" id="news-search" placeholder="Cari berita atau topik menarik...">
                    <button class="btn btn-danger rounded-pill px-4 py-2 fw-bold">Cari</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ================= NEWS FEED ================= -->
    <section class="py-5 mt-4">
        <div class="container py-lg-4">
            <div id="news-feed" class="row g-4">
                <!-- Skeleton Loading -->
                <div class="col-lg-4 col-md-6 news-skeleton">
                    <div class="card border-0 rounded-4 overflow-hidden shadow-sm" style="height: 450px;">
                        <div class="bg-secondary-subtle w-100 h-50"></div>
                        <div class="p-4">
                            <div class="bg-secondary-subtle rounded w-25 h-10 mb-3"></div>
                            <div class="bg-secondary-subtle rounded w-100 h-20 mb-2"></div>
                            <div class="bg-secondary-subtle rounded w-75 h-20 mb-4"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ================= FOOTER ================= -->
    <div id="footer"></div>

    <!-- Back to Top Button -->
    <button id="backToTop"
        class="btn btn-danger rounded-circle shadow p-0 d-flex align-items-center justify-content-center"
        style="width: 45px; height: 45px; position: fixed; bottom: 30px; right: 30px; z-index: 1000; opacity: 0; transition: 0.3s; pointer-events: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 15l-6-6-6 6" />
        </svg>
    </button>

    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Load core components
            await loadComponent("navbar", "components/navbar.html");
            await loadComponent("footer", "components/footer.html");

            // Custom News Fetch
            fetchNewsList();

            // Search Logic
            const searchInput = document.getElementById('news-search');
            const searchBtn = searchInput ? searchInput.nextElementSibling : null;

            if (searchInput && searchBtn) {
                searchBtn.addEventListener('click', () => {
                    fetchNewsList(searchInput.value);
                });

                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        fetchNewsList(searchInput.value);
                    }
                });
            }
        });

        async function fetchNewsList(query = '') {
            const feed = document.getElementById('news-feed');
            // Show loading
            feed.innerHTML = `
                <div class="col-12 text-center py-5">
                    <div class="spinner-border text-danger" role="status">
                        <span class="visually-hidden">Memuat...</span>
                    </div>
                </div>`;

            try {
                const url = query ? `${CONFIG.API_URL}/articles?search=${encodeURIComponent(query)}` : `${CONFIG.API_URL}/articles`;
                const r = await fetch(url);
                if (!r.ok) throw new Error();
                const data = await r.json();

                if (data.length) {
                    feed.innerHTML = data.map(item => `
                    <div class="col-lg-4 col-md-6">
                        <div class="news-card h-100 bg-white rounded-4 border-0 shadow-sm overflow-hidden d-flex flex-column hover-shadow position-relative">
                            <div class="position-relative overflow-hidden" style="height: 240px;">
                                <img src="${item.image ? CONFIG.STORAGE_URL + item.image : 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=988&auto=format&fit=crop'}" class="w-100 h-100 object-fit-cover">
                                <span class="badge bg-danger position-absolute top-0 start-0 m-3 px-3 py-2 rounded-pill fw-bold" style="background: rgba(230, 0, 18, 0.9) !important; backdrop-filter: blur(5px);">${item.badge || 'Berita'}</span>
                            </div>
                            <div class="p-4 d-flex flex-column flex-grow-1">
                                <div class="d-flex align-items-center gap-2 text-secondary small mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16"><path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/></svg>
                                    <span>${new Date(item.published_date).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' })}</span>
                                </div>
                                <h4 class="fw-bold mb-3 h5 lh-base text-dark">${item.title}</h4>
                                <p class="text-secondary small mb-4 flex-grow-1 opacity-75">${item.excerpt || ''}</p>
                                <a href="news-detail.html?id=${item.id}" class="d-inline-flex align-items-center text-danger fw-bold text-decoration-none read-more-link stretched-link">
                                    Baca Selengkapnya 
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-arrow-right ms-2" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>`).join('');
                } else {
                    feed.innerHTML = `<div class="col-12 text-center py-5"><h3 class="text-secondary">Tidak ada berita ditemukan untuk "${query}".</h3></div>`;
                }
            } catch (e) {
                feed.innerHTML = '<div class="col-12 text-center py-5 text-danger"><h3>Gagal terhubung ke pusat data.</h3></div>';
            }
        }
    </script>
</body>

</html>